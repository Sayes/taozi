import{_ as U,d as V,U as $,L as S,r as h,a as _,u as O,b as R,m as q,c as d,e as n,f as t,w as r,g as I,h as a,o as l,p as L,i as E,j as g}from"./index.9cc46334.js";var K="/assets/login_logo.74bf616c.png";const N=V({name:"login",components:{UserOutlined:$,LockOutlined:S},setup(){const e=A(),o=h({username:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:"change"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"change"}],verifyCode:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",trigger:"change"}]}),i=_(),c=O(),m=R(),f=_({captcha:"",image:""});return{formRef:i,store:c,router:m,form:e,rules:o,verifyCode:f}},methods:{refreshVerifyCode(){this.$daisyRequest.get("/general/user/verify_code").then(e=>{const o=e.data.data;if(!o){this.$message.error("\u8BF7\u6C42\u5F02\u5E38");return}this.verifyCode.image=o.image,this.verifyCode.captcha=o.captcha},e=>{this.$message.error(e)})},handleSubmit(){this.formRef.validate().then(()=>{this.form.captcha=this.verifyCode.captcha,this.store.dispatch("user/login",this.form).then(e=>{const i=this.router.currentRoute.value.query.redirect||"/";this.router.push(i)}).catch(e=>{q.error(e.message||e.data.message),this.refreshVerifyCode()})})}},mounted(){this.refreshVerifyCode()}});function A(){return h({username:"",password:"",verifyCode:"",captcha:"",remember:!1})}const v=e=>(L("data-v-20cab1f2"),e=e(),E(),e),D={class:"login-container"},j=v(()=>n("div",{class:"login-container-logo"},[n("img",{class:"login-container-logo-img",src:K})],-1)),x={class:"login-container-form"},T=v(()=>n("div",{class:"login-container-hello"},"\u6B22 \u8FCE \u767B \u5F55",-1)),z={class:"login-container-input"},G={style:{display:"flex"}},H={style:{width:"150px",height:"35px"}},J=["src"],M={key:1,style:{height:"35px","line-height":"35px","text-align":"center"}},P=g("\u8BB0\u4F4F\u5BC6\u7801"),Q=g(" \u767B\u5F55 ");function W(e,o,i,c,m,f){const y=a("UserOutlined"),p=a("a-input"),u=a("a-form-item"),C=a("LockOutlined"),F=a("a-input-password"),B=a("a-spin"),b=a("a-checkbox"),k=a("a-button"),w=a("a-form");return l(),d("div",D,[j,n("div",x,[T,n("div",z,[t(w,{ref:"formRef",model:e.form,rules:e.rules,onKeyup:I(e.handleSubmit,["enter"])},{default:r(()=>[t(u,{name:"username"},{default:r(()=>[t(p,{value:e.form.username,"onUpdate:value":o[0]||(o[0]=s=>e.form.username=s),autocomplete:"off",placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7"},{prefix:r(()=>[t(y,{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1}),t(u,{name:"password"},{default:r(()=>[t(F,{value:e.form.password,"onUpdate:value":o[1]||(o[1]=s=>e.form.password=s),autocomplete:"off",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},{prefix:r(()=>[t(C,{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1}),t(u,{name:"verifyCode"},{default:r(()=>[n("div",G,[t(p,{maxlength:4,value:e.form.verifyCode,"onUpdate:value":o[2]||(o[2]=s=>e.form.verifyCode=s),autocomplete:"off",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,8,["value"]),n("div",{onClick:o[3]||(o[3]=(...s)=>e.refreshVerifyCode&&e.refreshVerifyCode(...s)),style:{cursor:"pointer"}},[n("div",H,[e.verifyCode&&e.verifyCode.image?(l(),d("img",{key:0,src:e.verifyCode.image},null,8,J)):(l(),d("div",M,[t(B)]))])])])]),_:1}),t(u,null,{default:r(()=>[t(b,{checked:e.form.remember,"onUpdate:checked":o[4]||(o[4]=s=>e.form.remember=s)},{default:r(()=>[P]),_:1},8,["checked"])]),_:1}),t(u,null,{default:r(()=>[t(k,{type:"primary",onClick:o[5]||(o[5]=s=>e.handleSubmit())},{default:r(()=>[Q]),_:1})]),_:1})]),_:1},8,["model","rules","onKeyup"])])])])}var Y=U(N,[["render",W],["__scopeId","data-v-20cab1f2"]]);export{Y as default};
